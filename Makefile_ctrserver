PARAMS	:=	

ifneq ($(strip $(DISABLEAES)),)
	PARAMS	:=	$(PARAMS) DISABLEAES=1
endif

ifneq ($(strip $(DISABLENANDREDIR)),)
	PARAMS	:=	$(PARAMS) DISABLENANDREDIR=1
endif

ifneq ($(strip $(DISABLE_ARM11KERNEL_DEBUG)),)
	PARAMS	:=	$(PARAMS) DISABLE_ARM11KERNEL_DEBUG=1
endif

ifneq ($(strip $(DISABLE_ARM11KERNEL_PROCSTARTHOOK)),)
	PARAMS	:=	$(PARAMS) DISABLE_ARM11KERNEL_PROCSTARTHOOK=1
endif

ifneq ($(strip $(DISABLE_GETEXHDRHOOK)),)
	PARAMS	:=	$(PARAMS) DISABLE_GETEXHDRHOOK=1
endif

ifneq ($(strip $(ENABLE_LOADA9_x01FFB800)),)
	PARAMS	:=	$(PARAMS) ENABLE_LOADA9_x01FFB800=1
endif

ifneq ($(strip $(ENABLE_GAMECARD)),)
	PARAMS	:=	$(PARAMS) ENABLE_GAMECARD=1
endif

ifneq ($(strip $(ENABLE_CMDLOGGING)),)
	PARAMS	:=	$(PARAMS) ENABLE_CMDLOGGING=1
endif

ifneq ($(strip $(ENABLE_DUMP_NANDIMAGE)),)
	PARAMS	:=	$(PARAMS) ENABLE_DUMP_NANDIMAGE=1
endif

.PHONY: clean

all:	3dshax_arm9.bin 3dshax_arm11_ctrserver.bin

clean:
	make clean -f Makefile.arm9
	make clean -f Makefile_ctrserver.arm11 CTRULIB=$(CTRULIB)

3dshax_arm9.bin:
	make -f Makefile.arm9 OUTPATH=$(OUTPATH) $(PARAMS)

3dshax_arm11_ctrserver.bin:
	make -f Makefile_ctrserver.arm11 OUTPATH=$(OUTPATH) CTRULIB=$(CTRULIB)
