PARAMS	:=	

ifneq ($(strip $(DISABLEAES)),)
	PARAMS	:=	$(PARAMS) DISABLEAES=1
endif

ifneq ($(strip $(DISABLENANDREDIR)),)
	PARAMS	:=	$(PARAMS) DISABLENANDREDIR=1
endif

ifneq ($(strip $(DISABLE_ARM11KERNEL_DEBUG)),)
	PARAMS	:=	$(PARAMS) DISABLE_ARM11KERNEL_DEBUG=1
endif

ifneq ($(strip $(DISABLE_ARM11KERNEL_PROCSTARTHOOK)),)
	PARAMS	:=	$(PARAMS) DISABLE_ARM11KERNEL_PROCSTARTHOOK=1
endif

ifneq ($(strip $(DISABLE_ARM11KERNEL_SVCHANDLER_PATCH)),)
	PARAMS	:=	$(PARAMS) DISABLE_ARM11KERNEL_SVCHANDLER_PATCH=1
endif

ifneq ($(strip $(DISABLE_NETDEBUG)),)
	PARAMS	:=	$(PARAMS) DISABLE_NETDEBUG=1
endif

ifneq ($(strip $(DISABLE_GETEXHDRHOOK)),)
	PARAMS	:=	$(PARAMS) DISABLE_GETEXHDRHOOK=1
endif

ifneq ($(strip $(ENABLE_LOADA9_x01FFB800)),)
	PARAMS	:=	$(PARAMS) ENABLE_LOADA9_x01FFB800=1
endif

ifneq ($(strip $(ENABLE_GAMECARD)),)
	PARAMS	:=	$(PARAMS) ENABLE_GAMECARD=1
endif

ifneq ($(strip $(DISABLE_FSACCESSINFO_OVERWRITE)),)
	PARAMS	:=	$(PARAMS) DISABLE_FSACCESSINFO_OVERWRITE=1
endif

ifneq ($(strip $(DISABLE_A9THREAD)),)
	PARAMS	:=	$(PARAMS) DISABLE_A9THREAD=1
endif

ifneq ($(strip $(ENABLE_CONFIGMEM_DEVUNIT)),)
	PARAMS	:=	$(PARAMS) ENABLE_CONFIGMEM_DEVUNIT=1
endif

ifneq ($(strip $(ENABLE_FIRMLAUNCH_HOOK)),)
	PARAMS	:=	$(PARAMS) ENABLE_FIRMLAUNCH_HOOK=1
endif

ifneq ($(strip $(ENABLE_REGIONFREE)),)
	PARAMS	:=	$(PARAMS) ENABLE_REGIONFREE=$(ENABLE_REGIONFREE)
endif

ifneq ($(strip $(DISABLE_GAMECARDUPDATE)),)
	PARAMS	:=	$(PARAMS) DISABLE_GAMECARDUPDATE=1
endif

ifneq ($(strip $(ENABLE_CMDLOGGING)),)
	PARAMS	:=	$(PARAMS) ENABLE_CMDLOGGING=1
endif

ifneq ($(strip $(CMDLOGGING_PADCHECK)),)
	PARAMS	:=	$(PARAMS) CMDLOGGING_PADCHECK=$(CMDLOGGING_PADCHECK)
endif

ifneq ($(strip $(CMDLOGGING_PROCNAME0)),)
	PARAMS	:=	$(PARAMS) CMDLOGGING_PROCNAME0=$(CMDLOGGING_PROCNAME0)
endif

ifneq ($(strip $(CMDLOGGING_PROCNAME1)),)
	PARAMS	:=	$(PARAMS) CMDLOGGING_PROCNAME1=$(CMDLOGGING_PROCNAME1)
endif

ifneq ($(strip $(ENABLE_DUMP_NANDIMAGE)),)
	PARAMS	:=	$(PARAMS) ENABLE_DUMP_NANDIMAGE=1
endif

ifneq ($(strip $(NANDREDIR_SECTORNUM)),)
	PARAMS	:=	$(PARAMS) NANDREDIR_SECTORNUM=$(NANDREDIR_SECTORNUM)
endif

ifneq ($(strip $(NEW3DS)),)
	PARAMS	:=	$(PARAMS) NEW3DS=1
endif

ifneq ($(strip $(NEW3DS_MEMDUMPA9_DISABLEVRAMCLR)),)
	PARAMS	:=	$(PARAMS) NEW3DS_MEMDUMPA9_DISABLEVRAMCLR=1
endif

ifneq ($(strip $(NEW3DS_MEMDUMPA9_ADR)),)
	PARAMS	:=	$(PARAMS) NEW3DS_MEMDUMPA9_ADR=$(NEW3DS_MEMDUMPA9_ADR)
endif

ifneq ($(strip $(NEW3DS_MEMDUMPA9_SIZE)),)
	PARAMS	:=	$(PARAMS) NEW3DS_MEMDUMPA9_SIZE=$(NEW3DS_MEMDUMPA9_SIZE)
endif

.PHONY: clean

all:	3dshax_arm9.bin 3dshax_arm11_ctrserver.bin

clean:
	make clean -f Makefile.arm9
	make clean -f Makefile_ctrserver.arm11 CTRULIB=$(CTRULIB)

export OUTPATH

3dshax_arm9.bin:
	make -f Makefile.arm9 $(PARAMS)

3dshax_arm11_ctrserver.bin:
	make -f Makefile_ctrserver.arm11
